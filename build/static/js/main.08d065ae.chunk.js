(this["webpackJsonpcollege-registration-app"]=this["webpackJsonpcollege-registration-app"]||[]).push([[0],{35:function(e,a,t){e.exports=t(75)},40:function(e,a,t){},53:function(e,a,t){},75:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(32),s=t.n(c),r=(t(40),t(9)),i=t(2),o=t(10),m=t.n(o),u=t(13),d=t(1),v=t(33),h=t.n(v),p=Object(n.createContext)(),g=function(e){var a=l.a.useState(!1),t=Object(d.a)(a,2),n=t[0],c=t[1],s=l.a.useState(""),r=Object(d.a)(s,2),i=r[0],o=r[1],v=l.a.useState(!1),g=Object(d.a)(v,2),f=g[0],b=g[1],E=l.a.useState({}),N=Object(d.a)(E,2),O=N[0],k=N[1],S=l.a.useMemo((function(){return new h.a}),[]);Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.init({clientId:"fbc839fc-0e06-48b4-84f0-b3df06110b12",discoveryEndpoint:"https://eu-gb.appid.cloud.ibm.com/oauth/v4/0c36acd7-c6e6-4a7b-a932-989d33105fcf/.well-known/openid-configuration"});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),c(!0),o(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))();var j=function(){var e=Object(u.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.signin();case 3:a=e.sent,c(!1),o(""),b(!0),k({userid:a.idTokenPayload.identities[0].id,email:a.idTokenPayload.email,given_name:a.idTokenPayload.given_name,family_name:a.idTokenPayload.family_name,accessToken:a.accessToken}),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(0),c(!0),o(e.t0.message),b(!1),k({});case 16:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!1),o(""),b(!1),k({});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(p.Provider,{value:{errorState:n,errorMessage:i,isAuthenticated:f,activeUser:O,loginAction:j,signOut:y}},e.children)};t(53);var f=function(){var e=Object(n.useContext)(p),a=e.isAuthenticated,t=e.signOut,c=Object(i.g)();return l.a.createElement("div",{className:"navbar-fixed"},l.a.createElement("nav",{className:"white"},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#!",className:"brand-logo left indigo-text text-darken-4"},"Academia College"),l.a.createElement("ul",{className:"right hide-on-med-and-down"},a?l.a.createElement(n.Fragment,null,l.a.createElement("li",null,l.a.createElement(r.b,{onClick:function(e){a&&(t(),c.push("/"))},to:"#",className:"grey-text text-darken-4"},"Sign Out"))):l.a.createElement(n.Fragment,null,l.a.createElement("li",null,l.a.createElement(r.b,{to:"/",className:"grey-text text-darken-4"},"Sign in")))))))};var b=function(){var e=Object(n.useContext)(p),a=e.errorState,t=e.errorMessage,c=e.isAuthenticated,s=e.loginAction;return c?l.a.createElement(i.a,{to:"/newstudentinfo"}):l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center-align"},l.a.createElement("div",{style:{marginTop:50}},l.a.createElement("img",{src:"/images/logo/collegelogo.png",alt:"college_logo"}),l.a.createElement("h4",null,"Please Login/SignUp to",l.a.createElement("br",null),"register new student details"),l.a.createElement(r.b,{to:"#",className:"waves-effect waves-light btn indigo darken-4",style:{marginTop:30},onClick:s},"Click here to Proceed"),a&&l.a.createElement("div",{style:{color:"red",marginTop:10}},t)))))},E=t(7),N=t.n(E),O=t(14),k=t.n(O);var S=function(){var e=Object(n.useState)(""),a=Object(d.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)(""),r=Object(d.a)(s,2),o=r[0],m=r[1],u=Object(n.useState)(""),v=Object(d.a)(u,2),h=v[0],g=v[1],f=Object(n.useState)(0),b=Object(d.a)(f,2),E=b[0],O=b[1],S=Object(n.useState)(""),j=Object(d.a)(S,2),y=j[0],w=j[1],x=Object(n.useState)(""),_=Object(d.a)(x,2),C=_[0],F=_[1],A=Object(n.useState)(""),R=Object(d.a)(A,2),T=R[0],I=R[1],M=Object(n.useState)(""),P=Object(d.a)(M,2),U=P[0],B=P[1],L=Object(n.useState)(0),X=Object(d.a)(L,2),H=X[0],z=X[1],D=Object(n.useState)(""),J=Object(d.a)(D,2),W=J[0],q=J[1],$=Object(n.useState)(0),G=Object(d.a)($,2),K=G[0],Q=G[1],V=Object(n.useState)(!0),Y=Object(d.a)(V,2),Z=Y[0],ee=Y[1],ae=Object(n.useState)(!1),te=Object(d.a)(ae,2),ne=te[0],le=te[1],ce=Object(n.useState)(""),se=Object(d.a)(ce,2),re=se[0],ie=se[1],oe=Object(n.useState)(""),me=Object(d.a)(oe,2),ue=me[0],de=me[1],ve=Object(n.useState)(!1),he=Object(d.a)(ve,2),pe=he[0],ge=he[1],fe=Object(n.useContext)(p),be=fe.isAuthenticated,Ee=fe.activeUser,Ne=fe.signOut;if(Object(n.useEffect)((function(){if(console.log("activeUser",Ee),Ee.email&&Ee.accessToken){var e={headers:{Authorization:"Bearer ".concat(Ee.accessToken)},params:{email:Ee.email}};k.a.get("https://10a7902a.eu-gb.apigw.appdomain.cloud/sim/get-student-info",e).then((function(e){if(console.log("Response received: ",e),e.data.docs.length>0){var a=e.data.docs[0];c(Ee.given_name),m(Ee.family_name),g(Ee.email),O(a.age),w(a.location),F(a.fathersName),I(a.mothersName),B(a.hscName),z(a.hscMarks),q(a.sscName),Q(a.sscMarks),le(!0),ie(a._id),de(a._rev),ee(!1)}else c(Ee.given_name),m(Ee.family_name),g(Ee.email),ee(!1)})).catch((function(e){console.log("AXIOS ERROR: ",e)}))}}),[Ee]),!be)return l.a.createElement(i.a,{to:"/"});var Oe=function(){var e={userid:Ee.userid,firstName:Ee.given_name,lastName:Ee.family_name,email:Ee.email,age:E,location:y,fathersName:C,mothersName:T,hscName:U,hscMarks:H,sscName:W,sscMarks:K},a={headers:{Authorization:"Bearer ".concat(Ee.accessToken)}};k.a.post("https://10a7902a.eu-gb.apigw.appdomain.cloud/sim/post-student-info",e,a).then((function(e){ge(!1),e.data.error?N.a.toast({html:"<b>".concat(e.data.error,"</b>"),classes:"red darken-1 "}):e.data.id&&(N.a.toast({html:"<b>Thank you for your input.<br />Data updated successfully</b>",classes:"green darken-1 "}),Ne())})).catch((function(e){console.log("AXIOS ERROR: ",e),N.a.toast({html:"<b>AXIOS ERROR: ".concat(e,"</b>"),classes:"red darken-1 "}),ge(!1)}))},ke=function(){if(re&&ue&&Ee.email){var e={_id:re,_rev:ue,userid:Ee.userid,firstName:Ee.given_name,lastName:Ee.family_name,email:Ee.email,age:E,location:y,fathersName:C,mothersName:T,hscName:U,hscMarks:H,sscName:W,sscMarks:K},a={headers:{Authorization:"Bearer ".concat(Ee.accessToken)}};k.a.put("https://10a7902a.eu-gb.apigw.appdomain.cloud/sim/put-student-info",e,a).then((function(e){ge(!1),e.data.error?N.a.toast({html:"<b>".concat(e.data.error,"</b>"),classes:"red darken-1 "}):e.data.id&&(N.a.toast({html:"<b>Thank you for your input.<br />Data updated successfully</b>",classes:"green darken-1 "}),Ne())})).catch((function(e){console.log("AXIOS ERROR: ",e),N.a.toast({html:"<b>AXIOS ERROR: ".concat(e,"</b>"),classes:"red darken-1 "}),ge(!1)}))}};return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 center-align"},Z?l.a.createElement("h4",null,"Checking existing status..."):l.a.createElement(n.Fragment,null,ne?l.a.createElement("h4",null,"Update Existing Student Info"):l.a.createElement("h4",null,"Register New Student Info")))),Z?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col offset-s2 s8 offset-m3 m6 offset-l4 l4 "},l.a.createElement("div",{className:"progress indigo lighten-4",style:{height:5}},l.a.createElement("div",{className:"indeterminate indigo "})))):l.a.createElement("div",{className:"row"},l.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),E&&y&&C&&T&&U&&H&&W&&K?parseInt(E)<=0||parseFloat(H)<=0||parseFloat(K)<=0?N.a.toast({html:"<b>Age is invalid.</b>",classes:"red darken-1 "}):(ge(!0),ne?ke():Oe()):N.a.toast({html:"<b>All values are required to proceed.</b>",classes:"red darken-1 "})}(e)},className:"col s12 l8 offset-l2"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("input",{placeholder:"First Name",id:"first_name",type:"text",className:"validate",value:t,disabled:!0,onChange:function(e){return c(e.target.value)}}),l.a.createElement("label",{htmlFor:"first_name",className:"active"},"First Name")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("input",{placeholder:"Last Name",id:"last_name",type:"text",className:"validate",value:o,disabled:!0,onChange:function(e){return m(e.target.value)}}),l.a.createElement("label",{htmlFor:"last_name",className:"active"},"Last Name")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{placeholder:"Email Id",id:"email_id",type:"text",className:"validate",value:h,disabled:!0,onChange:function(e){return g(e.target.value)}}),l.a.createElement("label",{htmlFor:"email_id",className:"active"},"Email Id")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("input",{placeholder:"Age",id:"age",type:"number",className:"validate",value:E,onChange:function(e){return O(e.target.value)}}),l.a.createElement("label",{htmlFor:"age",className:"active"},"Age")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("input",{placeholder:"Location",id:"location",type:"text",className:"validate",value:y,onChange:function(e){return w(e.target.value)}}),l.a.createElement("label",{htmlFor:"location",className:"active"},"Location")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{placeholder:"Fathers Name",id:"fathers_name",type:"text",className:"validate",value:C,onChange:function(e){return F(e.target.value)}}),l.a.createElement("label",{htmlFor:"fathers_name",className:"active"},"Fathers Name")),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{placeholder:"Mothers Name",id:"mothers_name",type:"text",className:"validate",value:T,onChange:function(e){return I(e.target.value)}}),l.a.createElement("label",{htmlFor:"mothers_name",className:"active"},"Mothers Name")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("input",{placeholder:"HSC Name",id:"hsc_name",type:"text",className:"validate",value:U,onChange:function(e){return B(e.target.value)}}),l.a.createElement("label",{htmlFor:"hsc_name",className:"active"},"HSC Name")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("input",{placeholder:"HSC %",id:"hscmarks",type:"number",className:"validate",value:H,onChange:function(e){return z(e.target.value)}}),l.a.createElement("label",{htmlFor:"hscmarks",className:"active"},"HSC %")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("input",{placeholder:"SSC Name",id:"ssc_name",type:"text",className:"validate",value:W,onChange:function(e){return q(e.target.value)}}),l.a.createElement("label",{htmlFor:"ssc_name",className:"active"},"SSC Name")),l.a.createElement("div",{className:"input-field col s12 m6"},l.a.createElement("input",{placeholder:"SSC %",id:"sscmarks",type:"number",className:"validate",value:K,onChange:function(e){return Q(e.target.value)}}),l.a.createElement("label",{htmlFor:"sscmarks",className:"active"},"SSC %"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12 offset-m2 m8"},pe?l.a.createElement("div",{className:"progress indigo lighten-4",style:{height:5}},l.a.createElement("div",{className:"indeterminate indigo "})):l.a.createElement("button",{className:"waves-effect waves-light btn indigo darken-4",style:{width:"100%"}},l.a.createElement("span",null,ne?l.a.createElement(l.a.Fragment,null,"Update"):l.a.createElement(l.a.Fragment,null,"Submit"))))))))};var j=function(){return l.a.createElement(r.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(g,null,l.a.createElement(f,null),l.a.createElement(i.d,null,l.a.createElement(i.b,{exact:!0,path:"/",component:b}),l.a.createElement(i.b,{exact:!0,path:"/newstudentinfo",component:S})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.08d065ae.chunk.js.map